!function(factory){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function($){return factory($,window,document)}):"object"==typeof exports?module.exports=function(root,$){return root=root||window,$&&$.fn.dataTable||($=require("datatables.net")(root,$).$),factory($,root,root.document)}:factory(jQuery,window,document)}(function($,window,document,undefined){"use strict";function FixedHeader(dtSettings,config){if(!(this instanceof FixedHeader))throw"FixedHeader must be initialised with the 'new' keyword.";if(!0===config&&(config={}),dtSettings=new DataTable.Api(dtSettings),this.c=$.extend(!0,{},FixedHeader.defaults,config),this.s={dt:dtSettings,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:$(window).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:dtSettings.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+_instCounter++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:$(dtSettings.table().header()),tbody:$(dtSettings.table().body()),tfoot:$(dtSettings.table().footer()),header:{host:null,floating:null,floatingParent:$('<div class="dtfh-floatingparent">'),placeholder:null},footer:{host:null,floating:null,floatingParent:$('<div class="dtfh-floatingparent">'),placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent(),(dtSettings=dtSettings.settings()[0])._fixedHeader)throw"FixedHeader already initialised on table "+dtSettings.nTable.id;(dtSettings._fixedHeader=this)._constructor()}var DataTable=$.fn.dataTable,_instCounter=0;return $.extend(FixedHeader.prototype,{destroy:function(){this.s.dt.off(".dtfc"),$(window).off(this.s.namespace),this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0)},enable:function(enable,update){this.s.enable=enable,!update&&update!==undefined||(this._positions(),this._scroll(!0))},enabled:function(){return this.s.enable},headerOffset:function(offset){return offset!==undefined&&(this.c.headerOffset=offset,this.update()),this.c.headerOffset},footerOffset:function(offset){return offset!==undefined&&(this.c.footerOffset=offset,this.update()),this.c.footerOffset},update:function(force){var table=this.s.dt.table().node();$(table).is(":visible")?this.enable(!0,!1):this.enable(!1,!1),0!==$(table).children("thead").length&&(this._positions(),this._scroll(force===undefined||force))},_constructor:function(){var that=this,dt=this.s.dt;$(window).on("scroll"+this.s.namespace,function(){that._scroll()}).on("resize"+this.s.namespace,DataTable.util.throttle(function(){that.s.position.windowHeight=$(window).height(),that.update()},50));var autoFooter=$(".fh-fixedHeader");!this.c.headerOffset&&autoFooter.length&&(this.c.headerOffset=autoFooter.outerHeight());autoFooter=$(".fh-fixedFooter");!this.c.footerOffset&&autoFooter.length&&(this.c.footerOffset=autoFooter.outerHeight()),dt.on("column-reorder.dt.dtfc column-visibility.dt.dtfc column-sizing.dt.dtfc responsive-display.dt.dtfc",function(e,ctx){that.update()}).on("draw.dt.dtfc",function(e,ctx){that.update(ctx!==dt.settings()[0])}),dt.on("destroy.dtfc",function(){that.destroy()}),this._positions(),this._scroll()},_clone:function(scrollLeftUpdate,scrollEnabled){var tableNode,scrollBody,dt=this.s.dt,itemDom=this.dom[scrollLeftUpdate],itemElement="header"===scrollLeftUpdate?this.dom.thead:this.dom.tfoot;"footer"===scrollLeftUpdate&&this._scrollEnabled()||(!scrollEnabled&&itemDom.floating?itemDom.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(itemDom.floating&&(null!==itemDom.placeholder&&itemDom.placeholder.remove(),this._unsize(scrollLeftUpdate),itemDom.floating.children().detach(),itemDom.floating.remove()),tableNode=$(dt.table().node()),scrollBody=$(tableNode.parent()),scrollEnabled=this._scrollEnabled(),itemDom.floating=$(dt.table().node().cloneNode(!1)).attr("aria-hidden","true").css({"table-layout":"fixed",top:0,left:0}).removeAttr("id").append(itemElement),itemDom.floatingParent.css({width:scrollBody.width(),overflow:"hidden",height:"fit-content",position:"fixed",left:scrollEnabled?tableNode.offset().left+scrollBody.scrollLeft():0}).css("header"===scrollLeftUpdate?{top:this.c.headerOffset,bottom:""}:{top:"",bottom:this.c.footerOffset}).addClass("footer"===scrollLeftUpdate?"dtfh-floatingparentfoot":"dtfh-floatingparenthead").append(itemDom.floating).appendTo("body"),this._stickyPosition(itemDom.floating,"-"),(scrollLeftUpdate=()=>{var scrollLeft=scrollBody.scrollLeft();this.s.scrollLeft={footer:scrollLeft,header:scrollLeft},itemDom.floatingParent.scrollLeft(this.s.scrollLeft.header)})(),scrollBody.scroll(scrollLeftUpdate),itemDom.placeholder=itemElement.clone(!1),itemDom.placeholder.find("*[id]").removeAttr("id"),itemDom.host.prepend(itemDom.placeholder),this._matchWidths(itemDom.placeholder,itemDom.floating)))},_stickyPosition(el,sign){var that,rtl;this._scrollEnabled()&&(rtl="rtl"===$((that=this).s.dt.table().node()).css("direction"),el.find("th").each(function(){var right,left,potential;"sticky"===$(this).css("position")&&(right=$(this).css("right"),left=$(this).css("left"),"auto"===right||rtl?"auto"!==left&&rtl&&(potential=+left.replace(/px/g,"")+("-"===sign?-1:1)*that.s.dt.settings()[0].oBrowser.barWidth,$(this).css("left",0<potential?potential:0)):(potential=+right.replace(/px/g,"")+("-"===sign?-1:1)*that.s.dt.settings()[0].oBrowser.barWidth,$(this).css("right",0<potential?potential:0)))}))},_matchWidths:function(from,to){function set(name,toWidths){$(name,to).each(function(i){$(this).css({width:toWidths[i],minWidth:toWidths[i]})})}var tdWidths=function(name){return $(name,from).map(function(){return+$(this).css("width").replace(/[^\d\.]/g,"")}).toArray()},thWidths=tdWidths("th"),tdWidths=tdWidths("td");set("th",thWidths),set("td",tdWidths)},_unsize:function(item){var el=this.dom[item].floating;el&&("footer"===item||"header"===item&&!this.s.autoWidth)?$("th, td",el).css({width:"",minWidth:""}):el&&"header"===item&&$("th, td",el).css("min-width","")},_horizontal:function(item,scrollLeft){var newScrollLeft,itemDom=this.dom[item],lastScrollLeft=(this.s.position,this.s.scrollLeft);itemDom.floating&&lastScrollLeft[item]!==scrollLeft&&(this._scrollEnabled()&&(newScrollLeft=$($(this.s.dt.table().node()).parent()).scrollLeft(),itemDom.floating.scrollLeft(newScrollLeft),itemDom.floatingParent.scrollLeft(newScrollLeft)),lastScrollLeft[item]=scrollLeft)},_modeChange:function(mode,item,forceChange){this.s.dt;var importantWidth,focus,scrollOffset,windowBottom,bodyTop,prop,val,itemDom=this.dom[item],position=this.s.position,scrollEnabled=this._scrollEnabled();"footer"===item&&scrollEnabled||(importantWidth=function(w){itemDom.floating.attr("style",function(i,s){return(s||"")+"width: "+w+"px !important;"}),scrollEnabled||itemDom.floatingParent.attr("style",function(i,s){return(s||"")+"width: "+w+"px !important;"})},bodyTop=this.dom["footer"===item?"tfoot":"thead"],focus=$.contains(bodyTop[0],document.activeElement)?document.activeElement:null,prop=$($(this.s.dt.table().node()).parent()),"in-place"===mode?(itemDom.placeholder&&(itemDom.placeholder.remove(),itemDom.placeholder=null),this._unsize(item),"header"===item?itemDom.host.prepend(bodyTop):itemDom.host.append(bodyTop),itemDom.floating&&(itemDom.floating.remove(),itemDom.floating=null,this._stickyPosition(itemDom.host,"+")),itemDom.floatingParent&&itemDom.floatingParent.remove(),$($(itemDom.host.parent()).parent()).scrollLeft(prop.scrollLeft())):"in"===mode?(this._clone(item,forceChange),scrollOffset=prop.offset(),windowBottom=(val=$(document).scrollTop())+$(window).height(),bodyTop=scrollEnabled?scrollOffset.top:position.tbodyTop,prop=scrollEnabled?scrollOffset.top+prop.outerHeight():position.tfootTop,val="footer"===item?windowBottom<bodyTop?position.tfootHeight:bodyTop+position.tfootHeight-windowBottom:val+this.c.headerOffset+position.theadHeight-prop,prop="header"===item?"top":"bottom",val=this.c[item+"Offset"]-(0<val?val:0),itemDom.floating.addClass("fixedHeader-floating"),itemDom.floatingParent.css(prop,val).css({left:position.left,height:"header"===item?position.theadHeight:position.tfootHeight,"z-index":2}).append(itemDom.floating),importantWidth(position.width),"footer"===item&&itemDom.floating.css("top","")):"below"===mode?(this._clone(item,forceChange),itemDom.floating.addClass("fixedHeader-locked"),itemDom.floatingParent.css({position:"absolute",top:position.tfootTop-position.theadHeight,left:position.left+"px"}),importantWidth(position.width)):"above"===mode&&(this._clone(item,forceChange),itemDom.floating.addClass("fixedHeader-locked"),itemDom.floatingParent.css({position:"absolute",top:position.tbodyTop,left:position.left+"px"}),importantWidth(position.width)),focus&&focus!==document.activeElement&&setTimeout(function(){focus.focus()},10),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[item+"Mode"]=mode)},_positions:function(){var tbody=this.s.dt,tfoot=tbody.table(),position=this.s.position,scrollBody=this.dom,tableNode=$(tfoot.node()),scrollEnabled=this._scrollEnabled(),thead=$(tbody.table().header()),tfoot=$(tbody.table().footer()),tbody=scrollBody.tbody,scrollBody=tableNode.parent();position.visible=tableNode.is(":visible"),position.width=tableNode.outerWidth(),position.left=tableNode.offset().left,position.theadTop=thead.offset().top,position.tbodyTop=(scrollEnabled?scrollBody:tbody).offset().top,position.tbodyHeight=(scrollEnabled?scrollBody:tbody).outerHeight(),position.theadHeight=thead.outerHeight(),position.theadBottom=position.theadTop+position.theadHeight,tfoot.length?(position.tfootTop=position.tbodyTop+position.tbodyHeight,position.tfootBottom=position.tfootTop+tfoot.outerHeight(),position.tfootHeight=tfoot.outerHeight()):(position.tfootTop=position.tbodyTop+tbody.outerHeight(),position.tfootBottom=position.tfootTop,position.tfootHeight=position.tfootTop)},_scroll:function(getOffsetHeight){var footerMode,headerMode,scrollEnabled=this._scrollEnabled(),scrollBody=$(this.s.dt.table().node()).parent(),newHeight=scrollBody.offset(),bodyBottom=scrollBody.outerHeight(),adjustBlocker=$(document).scrollLeft(),windowTop=$(document).scrollTop(),windowHeight=$(window).height(),position=this.s.position,bodyTop=scrollEnabled?newHeight.top:position.tbodyTop,bodyLeft=(scrollEnabled?newHeight:position).left,bodyBottom=scrollEnabled?newHeight.top+bodyBottom:position.tfootTop,bodyWidth=scrollEnabled?scrollBody.outerWidth():position.tbodyWidth,windowBottom=windowTop+windowHeight;this.c.header&&(!this.s.enable||!position.visible||windowTop+this.c.headerOffset+position.theadHeight<=bodyTop?headerMode="in-place":windowTop+this.c.headerOffset+position.theadHeight>bodyTop&&windowTop+this.c.headerOffset<bodyBottom?(headerMode="in",scrollBody=$($(this.s.dt.table().node()).parent()),windowTop+this.c.headerOffset+position.theadHeight>bodyBottom||this.dom.header.floatingParent===undefined?getOffsetHeight=!0:this.dom.header.floatingParent.css({top:this.c.headerOffset,position:"fixed"}).append(this.dom.header.floating)):headerMode="below",!getOffsetHeight&&headerMode===this.s.headerMode||this._modeChange(headerMode,"header",getOffsetHeight),this._horizontal("header",adjustBlocker));var header={offset:{top:0,left:0},height:0},footer={offset:{top:0,left:0},height:0};this.c.footer&&this.dom.tfoot.length&&(!this.s.enable||!position.visible||position.tfootBottom+this.c.footerOffset<=windowBottom?footerMode="in-place":bodyBottom+position.tfootHeight+this.c.footerOffset>windowBottom&&bodyTop+this.c.footerOffset<windowBottom?(footerMode="in",getOffsetHeight=!0):footerMode="above",!getOffsetHeight&&footerMode===this.s.footerMode||this._modeChange(footerMode,"footer",getOffsetHeight),this._horizontal("footer",adjustBlocker),getOffsetHeight=el=>({offset:el.offset(),height:el.outerHeight()}),header=this.dom.header.floating?getOffsetHeight(this.dom.header.floating):getOffsetHeight(this.dom.thead),footer=this.dom.footer.floating?getOffsetHeight(this.dom.footer.floating):getOffsetHeight(this.dom.tfoot),scrollEnabled&&footer.offset.top>windowTop&&(newHeight=windowBottom+((newHeight=windowTop-newHeight.top)>-header.height?newHeight:0)-(header.offset.top+(newHeight<-header.height?header.height:0)+footer.height),scrollBody.outerHeight(newHeight=newHeight<0?0:newHeight),Math.round(scrollBody.outerHeight())>=Math.round(newHeight)?$(this.dom.tfoot.parent()).addClass("fixedHeader-floating"):$(this.dom.tfoot.parent()).removeClass("fixedHeader-floating"))),this.dom.header.floating&&this.dom.header.floatingParent.css("left",bodyLeft-adjustBlocker),this.dom.footer.floating&&this.dom.footer.floatingParent.css("left",bodyLeft-adjustBlocker),this.s.dt.settings()[0]._fixedColumns!==undefined&&(adjustBlocker=(side,end,el)=>{if(el===undefined){let blocker=$("div.dtfc-"+side+"-"+end+"-blocker");el=0===blocker.length?null:blocker.clone().appendTo("body").css("z-index",1)}return null!==el&&el.css({top:("top"===end?header:footer).offset.top,left:"right"===side?bodyLeft+bodyWidth-el.width():bodyLeft}),el},this.dom.header.rightBlocker=adjustBlocker("right","top",this.dom.header.rightBlocker),this.dom.header.leftBlocker=adjustBlocker("left","top",this.dom.header.leftBlocker),this.dom.footer.rightBlocker=adjustBlocker("right","bottom",this.dom.footer.rightBlocker),this.dom.footer.leftBlocker=adjustBlocker("left","bottom",this.dom.footer.leftBlocker))},_scrollEnabled:function(){var oScroll=this.s.dt.settings()[0].oScroll;return""!==oScroll.sY||""!==oScroll.sX}}),FixedHeader.version="3.2.1",FixedHeader.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},$.fn.dataTable.FixedHeader=FixedHeader,$.fn.DataTable.FixedHeader=FixedHeader,$(document).on("init.dt.dtfh",function(opts,settings,json){var init;"dt"===opts.namespace&&(init=settings.oInit.fixedHeader,opts=DataTable.defaults.fixedHeader,!init&&!opts||settings._fixedHeader||(opts=$.extend({},opts,init),!1!==init&&new FixedHeader(settings,opts)))}),DataTable.Api.register("fixedHeader()",function(){}),DataTable.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(fh){fh=fh._fixedHeader;fh&&fh.update()})}),DataTable.Api.register("fixedHeader.enable()",function(flag){return this.iterator("table",function(fh){fh=fh._fixedHeader;flag=flag===undefined||flag,fh&&flag!==fh.enabled()&&fh.enable(flag)})}),DataTable.Api.register("fixedHeader.enabled()",function(){if(this.context.length){var fh=this.context[0]._fixedHeader;if(fh)return fh.enabled()}return!1}),DataTable.Api.register("fixedHeader.disable()",function(){return this.iterator("table",function(fh){fh=fh._fixedHeader;fh&&fh.enabled()&&fh.enable(!1)})}),$.each(["header","footer"],function(i,el){DataTable.Api.register("fixedHeader."+el+"Offset()",function(offset){var ctx=this.context;return offset===undefined?ctx.length&&ctx[0]._fixedHeader?ctx[0]._fixedHeader[el+"Offset"]():undefined:this.iterator("table",function(fh){fh=fh._fixedHeader;fh&&fh[el+"Offset"](offset)})})}),FixedHeader});